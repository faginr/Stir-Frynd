{% extends 'base.html' %} 

{% block content %}

<div class="upload-title">
  <h1>Upload New Recipe</h1>
</div>

<div class="image-container">
  <label for="image">Image:</label>
  <img id="image" src="#" alt="" />
  <p>Enter keyword to find an image!</p>
  <input id="keyword" type="text" />
  <button id="image-btn">Get Image!</button>
  <span id="url-output"></span>
</div>

<div class="upload-form">
  <form action="" method="post">

    <div>
        <p>Once you are happy with the image, paste the url here:</p>
        <input type="text" name="img" value="{{request.form['img']}}"></input>
    </div>

    <div>
      <label for="title">Recipe Name:</label>
      <input type="text" name="title" value="{{request.form['title']}}" required></input>
    </div>

    <div>
      <label for="type">Meal Type:</label>

      <input type="radio" name="type" id="breakfast" value="0" required></input>
      <label for="breakfast">Breakfast</label>

      <input type="radio" name="type" id="lunch" value="1"></input>
      <label for="lunch">Lunch</label>

      <input type="radio" name="type" id="dinner" value="2"></input>
      <label for="dinner">Dinner</label>
      <input type="radio" name="type" id="misc" value="3"></input>
      <label for="misc">Misc.</label>
    </div>

    
    <div id="ingredient-container">
      <label name="ingredient-label" for="description">Ingredient:</label>
      <input name="description" type="text" value="{{request.form['desription']}}" required></input>
            
      <label for="quantity-label">Qty:</label>
      <input name="quantity" type="number" value="{{request.form['quantity']}}" required></input>
            
      <label name="unit-label" for="unit">Units:</label>
      <input name="unit" type="text" value="{{request.form['unit']}}" required></input>
    </div>

    <div>
      <label for="instructions">Instructions:</label>
    </div>
    <div>
      <textarea name="instructions" id="instructions" cols="40" rows="30" placeholder="Type recipe directions here...." required>{{request.form['instructions']}}</textarea>
    </div>
    
    <div id="upload-submit">
      <button type="submit">Submit</button>
    </div>

  </form>

</div>
{% endblock %} 

{% block javascript %}
<script>
  let btn = document.querySelector("#image-btn");
  let keyword = document.querySelector("#keyword");    


  btn.addEventListener("click", function () {
    let word = keyword.value;
    let url = "https://source.unsplash.com/random/350x300/?" + word;
    console.log(url);
    document.querySelector("#image").src = url;
    document.querySelector("#image").style.display = "block";
    document.querySelector("#url-output").innerHTML = url;
  });



</script>

{% endblock %}
