{% extends 'base.html' %} {% block content %}

<div class="upload-title">
  <h1>Upload New Recipe</h1>
</div>

<div class="image-container">
  <label for="image">Image:</label>
  <img id="image" src="#" alt="" />
  <p>Enter keyword to find an image!</p>
  <input id="keyword" type="text" />
  <button id="image-btn">Get Image!</button>
  <span id="url-output"></span>
</div>

<div class="upload-form">
  <form action="" method="post">
    <div>
        <p>Once you are happy with the image, paste the url here:</p>
        <input type="text" name="img" value="{{request.form['img']}}"></input>
    </div>
    <div>
      <label for="title">Recipe Name:</label>
      <input type="text" name="title" value="{{request.form['title']}}"></input>
    </div>
    <div>
      <label for="type">Meal Type:</label>

      <input type="radio" name="type" id="breakfast" value="0"></input>
      <label for="breakfast">Breakfast</label>

      <input type="radio" name="type" id="lunch" value="1"></input>
      <label for="lunch">Lunch</label>

      <input type="radio" name="type" id="dinner" value="2"></input>
      <label for="dinner">Dinner</label>
      <input type="radio" name="type" id="misc" value="3"></input>
      <label for="misc">Misc.</label>
    </div>
    <div id="ingredients">
        <div class="ingredient-container">
            <label name="ingredient-label" for="ingredient1">Ingredient:</label>
            <input name="ingredient" type="text"></input>
            <span name="plus" class="plus" onclick="addField()">+</span>
            <span name="minus"class="minus">-</span>
        </div>
    </div>
    <div>
      <label for="description">Description:</label>
    </div>
    <div>
      <textarea name="instructions" id="description" cols="40" rows="30" placeholder="Type recipe directions here....">{{request.form['instructions']}}</textarea
      >
    </div>
    <div id="upload-submit">
      <button type="submit">Submit</button>
    </div>
  </form>
</div>
{% endblock %} 

{% block javascript %}
<script>
  let btn = document.querySelector("#image-btn");
  let keyword = document.querySelector("#keyword");
  let ingredients = document.querySelector("#ingredients")
    

  function addField(){
      let newIngredient = document.createElement("div")
      newIngredient.classList.add("ingredient-container")

      let newLabel = document.createElement("label");
      let newInput = document.createElement("input");
    //   let newPlus = document.createElement("span");
    //   let newMinus = document.createElement("span");
      newLabel.innerHTML = "Ingredient:"
    //   newPlus.innerHTML = "+"
    //   newMinus.innerHTML = "-"
      
      newIngredient.appendChild(newLabel);
      newIngredient.appendChild(newInput);
    //   newIngredient.appendChild(newPlus);
    //   newIngredient.appendChild(newMinus);

      document.querySelector("#ingredients").appendChild(newIngredient);
  }

//   function removeField(){

//   }

  btn.addEventListener("click", function () {
    let word = keyword.value;
    let url = "https://source.unsplash.com/random/350x300/?" + word;
    console.log(url);
    document.querySelector("#image").src = url;
    document.querySelector("#image").style.display = "block";
    document.querySelector("#url-output").innerHTML = url;
  });



</script>

{% endblock %}
